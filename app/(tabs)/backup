import { Stack} from 'expo-router';
import FontAwesome from "@expo/vector-icons/FontAwesome";
import { useState ,useEffect } from 'react';
import {PixelRatio,Dimensions, SafeAreaView} from 'react-native';
import { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';
import Home from './home/index';
import CreatePDF from './createpdf/index';
import ViewPDF from './pdfview/index';
import Page from './settings/index';
import ReceiveSharingIntent from 'react-native-receive-sharing-intent';



const Tabs = createMaterialTopTabNavigator();

function calculateFontSize(Size) {
    const fontScale = PixelRatio.getFontScale();
    return Size / fontScale;
  }

export default function Layout() {

    ReceiveSharingIntent.getReceivedFiles(files => {
      // files returns as JSON Array example
      //[{ filePath: null, text: null, weblink: null, mimeType: null, contentUri: null, fileName: null, extension: null }]
      console.log(files);
      console.log("hello new intent");
    },
    (error) =>{
      console.log(error);
    },
    'ShareMedia' // share url protocol (must be unique to your app, suggest using your apple bundle id)
    );

    ReceiveSharingIntent.clearReceivedFiles();

  return (
 <SafeAreaView style={{flex:1,}}>
<Stack.Screen options={{ headerShown: false}} />

    <Tabs.Navigator
      tabBarPosition = 'bottom'
        screenOptions={{
           tabBarActiveTintColor:'#80f418',
           tabBarInactiveTintColor:'#ff0435',
           tabBarLabelStyle: { fontSize: calculateFontSize(10) },
           tabBarStyle: {
                   backgroundColor: 'white',
                   borderRadius:15,
                   position: 'absolute',
                   width:"90%",
                   left:'5%',
                   right:'5%',
                   bottom:"2%",
                   overflow:'hidden',
                        },
           tabBarIndicatorStyle: {

                   borderRadius:3,
                   borderWidth:2,
                   borderColor: '#80f418',
                   position:'top',
        },
          tabBarLabelStyle: {
            fontSize: 9,
            fontWeight: 'bold',
        },
    tabBarPressColor: "transparent"

          }}>

      <Tabs.Screen
        name="home"
        component={Home}
        options={{
          tabBarLabel: "HOME",
          title: "home",
          tabBarIcon: ({color}) => (
            <FontAwesome
              size={calculateFontSize(24)}
              style={{ alignSelf:'center' }}
              name="home"
              color={color}
            />
          ),
        }}
      />
      <Tabs.Screen
        name="pdfview"
        component={ViewPDF}
        options={{
          tabBarLabel: "PDFview",
          title: "PDFview",
          tabBarIcon: ({ color }) => (
            <FontAwesome
              size={calculateFontSize(24)}
              style={{ alignSelf:'center' }}
              name="file-pdf-o"
              color={color}
            />
          ),
        }}
      />
   <Tabs.Screen
        name="createpdf"
        component={CreatePDF}
        options={{
          tabBarLabel: "CreatePDF",
          title: "createPDF",
          tabBarIcon: ({ color }) => (
            <FontAwesome
              size={calculateFontSize(24)}
              style={{ alignSelf:'center' }}
              name="plus"
              color={color}
            />
          ),
        }}
      />
<Tabs.Screen
        name="settings"
        component={Page}
         options={{
          tabBarLabel: "Settings",
          title: "Settings",
          tabBarIcon: ({ color }) => (
            <FontAwesome
              size={calculateFontSize(24)}
              style={{ alignSelf:'center' }}
              name="gear"
              color={color}
             spin />
          ),
        }}
      />
    </Tabs.Navigator>
</SafeAreaView>
  );
}
